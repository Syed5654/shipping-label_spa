import{_ as x,n as I,u as L,g as p,h as E,A as k,T as S,c as n,a as e,i as h,v as b,F as v,j as w,t as _,b as B,w as F,r as T,o as i,p as j,f as C}from"./index-DHqtYgGs.js";const r=d=>(j("data-v-eb81e9f4"),d=d(),C(),d),N={class:"login w-100 d-flex align-items-center justify-content-center bg-light"},P={class:"container"},V={class:"row w-100 justify-content-center"},A={class:"col-lg-6"},D={class:"card border-0 shadow p-2 p-sm-5 rounded-4"},M={class:"card-body"},O=r(()=>e("div",{class:"text-center mb-4"},[e("h2",{class:"fst-italic font-bold text-primary mb-2"},"Ecomfulfil."),e("h4",null,"Login to your account.")],-1)),R={class:"w-100 mb-3"},U=r(()=>e("label",{for:"email",class:"form-label"},"Email Address",-1)),$={class:"w-100 mb-4"},J=r(()=>e("label",{for:"password",class:"form-label"},"Password",-1)),W={class:"text-center mb-2"},q=["disabled"],z={class:"text-center"},G=r(()=>e("small",null,"Don't have a account? Register here",-1)),H=r(()=>e("div",{class:"error_toast position-fixed"},[e("div",{id:"errorToast",class:"toast align-items-center text-bg-danger border-0",role:"alert","aria-live":"assertive","aria-atomic":"true"},[e("div",{class:"d-flex"},[e("div",{class:"toast-body"}," Something went wrong, please try again. "),e("button",{type:"button",class:"btn-close btn-close-white me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"})])])],-1)),K={__name:"Login",setup(d){const f=I(),u=L(),o=p({email:"",password:""}),l=p(!1),c=p({email:"",password:""});E(()=>{u.state.isLoggedIn&&f.push("/generate-label"),window.addEventListener("keydown",a=>{a.key==="Enter"&&g()})});const g=()=>{try{l.value=!0,k.post("login",o.value).then(a=>{if(a.data.error){c.value=a.data.validation_message;let t=Object.keys(a.data.validation_message);t.forEach(m=>{let s=document.getElementById(m);s.classList.add("is-invalid"),document.getElementById(t[0]).focus(),s.addEventListener("input",()=>{s.value.trim()!==""?s.classList.remove("is-invalid"):s.classList.add("is-invalid")})}),l.value=!1;return}else{l.value=!1,u.state.user=a.data.user,u.state.isLoggedIn=!0;const t=JSON.stringify(a.data.user);localStorage.setItem("user",t),y(),f.push("/generate-label")}})}catch{l.value=!1,new S(document.getElementById("errorToast")).show(),console.error("Internal Server Error")}},y=()=>{o.value={email:"",password:""},c.value={email:"",password:""}};return(a,t)=>{const m=T("router-link");return i(),n(v,null,[e("section",N,[e("div",P,[e("div",V,[e("div",A,[e("div",D,[e("div",M,[O,e("div",R,[U,h(e("input",{type:"email",class:"form-control",id:"email",placeholder:"Please enter your email","onUpdate:modelValue":t[0]||(t[0]=s=>o.value.email=s)},null,512),[[b,o.value.email]]),(i(!0),n(v,null,w(c.value.email,s=>(i(),n("small",{class:"text-danger",key:`${s}-email`},_(s),1))),128))]),e("div",$,[J,h(e("input",{type:"password",class:"form-control",id:"password",placeholder:"Please enter your password","onUpdate:modelValue":t[1]||(t[1]=s=>o.value.password=s)},null,512),[[b,o.value.password]]),(i(!0),n(v,null,w(c.value.password,s=>(i(),n("small",{class:"text-danger",key:`${s}-password`},_(s),1))),128))]),e("div",W,[e("button",{class:"btn btn-primary font-bold text-white px-5",disabled:l.value,onClick:g},_(l.value?"Please Wait":"Login"),9,q)]),e("div",z,[B(m,{to:"/register",class:"text-secondary"},{default:F(()=>[G]),_:1})])])])])])])]),H],64)}}},Y=x(K,[["__scopeId","data-v-eb81e9f4"]]);export{Y as default};
