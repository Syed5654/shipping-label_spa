import{_ as x,n as I,u as k,g as _,h as E,A as L,T as S,c as o,a as e,i as f,v as b,F as u,j as g,t as m,b as B,w as F,r as C,o as n,p as P,f as R}from"./index-DHqtYgGs.js";const i=c=>(P("data-v-41b806cc"),c=c(),R(),c),T={class:"register w-100 d-flex align-items-center justify-content-center bg-light"},V={class:"container"},j={class:"row w-100 justify-content-center"},A={class:"col-lg-6"},N={class:"card border-0 shadow p-2 p-sm-5 rounded-4"},U={class:"card-body"},$=i(()=>e("div",{class:"text-center mb-4"},[e("h2",{class:"fst-italic font-bold text-primary mb-2"},"Ecomfulfil."),e("h4",null,"Create your account.")],-1)),D={class:"w-100 mb-3"},M=i(()=>e("label",{for:"name",class:"form-label"},"Full name",-1)),O={class:"w-100 mb-3"},J=i(()=>e("label",{for:"email",class:"form-label"},"Email Address",-1)),W={class:"w-100 mb-4"},q=i(()=>e("label",{for:"password",class:"form-label"},"Password",-1)),z={class:"text-center mb-2"},G=["disabled"],H={class:"text-center"},K=i(()=>e("small",null,"Already have an account? Log In",-1)),Q=i(()=>e("div",{class:"error_toast position-fixed"},[e("div",{id:"errorToast",class:"toast align-items-center text-bg-danger border-0",role:"alert","aria-live":"assertive","aria-atomic":"true"},[e("div",{class:"d-flex"},[e("div",{class:"toast-body"}," Something went wrong, please try again. "),e("button",{type:"button",class:"btn-close btn-close-white me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"})])])],-1)),X={__name:"Register",setup(c){const h=I(),p=k(),l=_({name:"",email:"",password:""}),r=_(!1),d=_({name:"",email:"",password:""});E(()=>{p.state.isLoggedIn&&h.push("/generate-label"),window.addEventListener("keydown",a=>{a.key==="Enter"&&w()})});const w=()=>{r.value=!0;try{L.post("register",l.value).then(a=>{if(a.data.error){d.value=a.data.validation_message;let t=Object.keys(a.data.validation_message);t.forEach(v=>{let s=document.getElementById(v);s.classList.add("is-invalid"),document.getElementById(t[0]).focus(),s.addEventListener("input",()=>{s.value.trim()!==""?s.classList.remove("is-invalid"):s.classList.add("is-invalid")})}),r.value=!1;return}else{r.value=!1,p.state.user=a.data.user,p.state.isLoggedIn=!0;const t=JSON.stringify(a.data.user);localStorage.setItem("user",t),y(),h.push("/generate-label")}})}catch{console.error("Internal Server Error"),r.value=!1,new S(document.getElementById("errorToast")).show()}},y=()=>{l.value={name:"",email:"",password:""},d.value={name:"",email:"",password:""}};return(a,t)=>{const v=C("router-link");return n(),o(u,null,[e("section",T,[e("div",V,[e("div",j,[e("div",A,[e("div",N,[e("div",U,[$,e("div",D,[M,f(e("input",{type:"text",class:"form-control",id:"name",placeholder:"Please enter your full name","onUpdate:modelValue":t[0]||(t[0]=s=>l.value.name=s)},null,512),[[b,l.value.name]]),(n(!0),o(u,null,g(d.value.name,s=>(n(),o("small",{class:"text-danger",key:`${s}-name`},m(s),1))),128))]),e("div",O,[J,f(e("input",{type:"email",class:"form-control",id:"email",placeholder:"Please enter your email","onUpdate:modelValue":t[1]||(t[1]=s=>l.value.email=s)},null,512),[[b,l.value.email]]),(n(!0),o(u,null,g(d.value.email,s=>(n(),o("small",{class:"text-danger",key:`${s}-email`},m(s),1))),128))]),e("div",W,[q,f(e("input",{type:"password",class:"form-control",id:"password",placeholder:"Please enter your password","onUpdate:modelValue":t[2]||(t[2]=s=>l.value.password=s)},null,512),[[b,l.value.password]]),(n(!0),o(u,null,g(d.value.password,s=>(n(),o("small",{class:"text-danger",key:`${s}-password`},m(s),1))),128))]),e("div",z,[e("button",{class:"btn btn-primary font-bold text-white px-5",disabled:r.value,onClick:w},m(r.value?"Please Wait":"Register"),9,G)]),e("div",H,[B(v,{to:"/login",class:"text-secondary"},{default:F(()=>[K]),_:1})])])])])])])]),Q],64)}}},ee=x(X,[["__scopeId","data-v-41b806cc"]]);export{ee as default};
