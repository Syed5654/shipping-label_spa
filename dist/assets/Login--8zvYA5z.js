import{_ as x,n as I,r as p,l as L,c as i,a as e,w as h,v as g,F as _,b,t as v,g as S,h as k,u as E,A as B,T as F,j as T,o as r,p as j,k as C}from"./index-CnE4Z2TP.js";const n=d=>(j("data-v-3fdb6ccd"),d=d(),C(),d),N={class:"login w-100 d-flex align-items-center justify-content-center bg-light"},P={class:"container"},V={class:"row w-100 justify-content-center"},A={class:"col-lg-6"},D={class:"card border-0 shadow p-2 p-sm-5 rounded-4"},M={class:"card-body"},O=n(()=>e("div",{class:"text-center mb-4"},[e("h2",{class:"fst-italic font-bold text-primary mb-2"},"Ecomfulfil."),e("h4",null,"Login to your Shippo account.")],-1)),R={class:"w-100 mb-3"},U=n(()=>e("label",{for:"email",class:"form-label"},"Email Address",-1)),$={class:"w-100 mb-4"},J=n(()=>e("label",{for:"password",class:"form-label"},"Password",-1)),W={class:"text-center mb-2"},q=["disabled"],z={class:"text-center"},G=n(()=>e("small",null,"Don't have a account? Register here",-1)),H=n(()=>e("div",{class:"error_toast position-fixed"},[e("div",{id:"errorToast",class:"toast align-items-center text-bg-danger border-0",role:"alert","aria-live":"assertive","aria-atomic":"true"},[e("div",{class:"d-flex"},[e("div",{class:"toast-body"}," Something went wrong, please try again. "),e("button",{type:"button",class:"btn-close btn-close-white me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"})])])],-1)),K={__name:"Login",setup(d){const f=I(),u=E(),o=p({email:"",password:""}),l=p(!1),c=p({email:"",password:""});L(()=>{u.state.isLoggedIn&&f.push("/")});const w=()=>{try{l.value=!0,B.post("login",o.value).then(a=>{if(a.data.error){c.value=a.data.validation_message;let t=Object.keys(a.data.validation_message);t.forEach(m=>{let s=document.getElementById(m);s.classList.add("is-invalid"),document.getElementById(t[0]).focus(),s.addEventListener("input",()=>{s.value.trim()!==""?s.classList.remove("is-invalid"):s.classList.add("is-invalid")})}),l.value=!1;return}else{l.value=!1,u.state.user=a.data.user,u.state.isLoggedIn=!0;const t=JSON.stringify(a.data.user);localStorage.setItem("user",t),y(),f.push("/")}})}catch{l.value=!1,new F(document.getElementById("errorToast")).show(),console.error("Internal Server Error")}},y=()=>{o.value={email:"",password:""},c.value={email:"",password:""}};return(a,t)=>{const m=T("router-link");return r(),i(_,null,[e("section",N,[e("div",P,[e("div",V,[e("div",A,[e("div",D,[e("div",M,[O,e("div",R,[U,h(e("input",{type:"email",class:"form-control",id:"email",placeholder:"Please enter your email","onUpdate:modelValue":t[0]||(t[0]=s=>o.value.email=s)},null,512),[[g,o.value.email]]),(r(!0),i(_,null,b(c.value.email,s=>(r(),i("small",{class:"text-danger",key:`${s}-email`},v(s),1))),128))]),e("div",$,[J,h(e("input",{type:"password",class:"form-control",id:"password",placeholder:"Please enter your password","onUpdate:modelValue":t[1]||(t[1]=s=>o.value.password=s)},null,512),[[g,o.value.password]]),(r(!0),i(_,null,b(c.value.password,s=>(r(),i("small",{class:"text-danger",key:`${s}-password`},v(s),1))),128))]),e("div",W,[e("button",{class:"btn btn-primary font-bold text-white px-5",disabled:l.value,onClick:w},v(l.value?"Please Wait":"Login"),9,q)]),e("div",z,[S(m,{to:"/register",class:"text-secondary"},{default:k(()=>[G]),_:1})])])])])])])]),H],64)}}},Y=x(K,[["__scopeId","data-v-3fdb6ccd"]]);export{Y as default};
