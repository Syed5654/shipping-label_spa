import{_ as I,q as L,u as E,g as p,h as k,T as h,A as S,c as r,a as e,j as w,v as b,F as v,k as y,t as _,b as T,w as B,r as F,o as n,p as j,f as C}from"./index-SqO7bBaq.js";const i=d=>(j("data-v-efd63d40"),d=d(),C(),d),N={class:"login w-100 d-flex align-items-center justify-content-center bg-light"},P={class:"container"},V={class:"row w-100 justify-content-center"},A={class:"col-lg-6"},D={class:"card border-0 shadow p-2 p-sm-5 rounded-4"},M={class:"card-body"},O=i(()=>e("div",{class:"text-center mb-4"},[e("h2",{class:"fst-italic font-bold text-primary mb-2"},"Ecomfulfil."),e("h4",null,"Login to your account.")],-1)),R={class:"w-100 mb-3"},U=i(()=>e("label",{for:"email",class:"form-label"},"Email Address",-1)),$={class:"w-100 mb-4"},q=i(()=>e("label",{for:"password",class:"form-label"},"Password",-1)),J={class:"text-center mb-2"},W=["disabled"],z={class:"text-center"},G=i(()=>e("small",null,"Don't have a account? Register here",-1)),H=i(()=>e("div",{class:"error_toast position-fixed"},[e("div",{id:"errorToast",class:"toast align-items-center text-bg-danger border-0",role:"alert","aria-live":"assertive","aria-atomic":"true"},[e("div",{class:"d-flex"},[e("div",{class:"toast-body"}," Something went wrong, please try again. "),e("button",{type:"button",class:"btn-close btn-close-white me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"})])])],-1)),K={__name:"Login",setup(d){const f=L(),u=E(),l=p({email:"",password:""}),o=p(!1),c=p({email:"",password:""});k(()=>{u.state.isLoggedIn&&f.push("/generate-label"),window.addEventListener("keydown",t=>{t.key==="Enter"&&g()})});const g=()=>{try{o.value=!0,S.post("login",l.value).then(t=>{if(t.data.error){c.value=t.data.validation_message;let a=Object.keys(t.data.validation_message);a.forEach(m=>{let s=document.getElementById(m);s.classList.add("is-invalid"),document.getElementById(a[0]).focus(),s.addEventListener("input",()=>{s.value.trim()!==""?s.classList.remove("is-invalid"):s.classList.add("is-invalid")})}),o.value=!1;return}else{o.value=!1,u.state.user=t.data.user,u.state.isLoggedIn=!0;const a=JSON.stringify(t.data.user);localStorage.setItem("user",a),x(),f.push("/generate-label")}}).catch(()=>{o.value=!1,new h(document.getElementById("errorToast")).show()})}catch{o.value=!1,new h(document.getElementById("errorToast")).show(),console.error("Internal Server Error")}},x=()=>{l.value={email:"",password:""},c.value={email:"",password:""}};return(t,a)=>{const m=F("router-link");return n(),r(v,null,[e("section",N,[e("div",P,[e("div",V,[e("div",A,[e("div",D,[e("div",M,[O,e("div",R,[U,w(e("input",{type:"email",class:"form-control",id:"email",placeholder:"Please enter your email","onUpdate:modelValue":a[0]||(a[0]=s=>l.value.email=s)},null,512),[[b,l.value.email]]),(n(!0),r(v,null,y(c.value.email,s=>(n(),r("small",{class:"text-danger",key:`${s}-email`},_(s),1))),128))]),e("div",$,[q,w(e("input",{type:"password",class:"form-control",id:"password",placeholder:"Please enter your password","onUpdate:modelValue":a[1]||(a[1]=s=>l.value.password=s)},null,512),[[b,l.value.password]]),(n(!0),r(v,null,y(c.value.password,s=>(n(),r("small",{class:"text-danger",key:`${s}-password`},_(s),1))),128))]),e("div",J,[e("button",{class:"btn btn-primary font-bold text-white px-5",disabled:o.value,onClick:g},_(o.value?"Please Wait":"Login"),9,W)]),e("div",z,[T(m,{to:"/register",class:"text-secondary"},{default:B(()=>[G]),_:1})])])])])])])]),H],64)}}},Y=I(K,[["__scopeId","data-v-efd63d40"]]);export{Y as default};
